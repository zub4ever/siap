/*
 Highcharts Stock JS v9.3.1 (2021-11-05)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Karol Kolodziej

 License: www.highcharts.com/license
*/
'use strict';(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("highcharts/indicators/klinger",["highcharts","highcharts/modules/stock"],function(f){b(f);b.Highcharts=f;return b}):b("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(b){function f(b,k,g,f){b.hasOwnProperty(k)||(b[k]=f.apply(null,g))}b=b?b._modules:{};f(b,"Stock/Indicators/MultipleLinesComposition.js",[b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],
function(b,k){var g=b.seriesTypes.sma,f=k.defined,l=k.error,n=k.merge,h;(function(b){function k(){var c=this,a=c.linesApiNames,d=c.points,b=c.options,e=c.graph,y={options:{gapSize:b.gapSize}},q=[],k=c.getTranslatedLinesNames(c.pointValKey),m=d.length,h;k.forEach(function(c,a){for(q[a]=[];m--;)h=d[m],q[a].push({x:h.x,plotX:h.plotX,plotY:h[c],isNull:!f(h[c])});m=d.length});a.forEach(function(a,d){q[d]?(c.points=q[d],b[a]?c.options=n(b[a].styles,y):l('Error: "There is no '+a+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names." at mixin/multiple-line.js:34'),
c.graph=c["graph"+a],g.prototype.drawGraph.call(c),c["graph"+a]=c.graph):l('Error: "'+a+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")});c.points=d;c.options=b;c.graph=e;g.prototype.drawGraph.call(c)}function h(c){var a=[];(this.pointArrayMap||[]).forEach(function(d){d!==c&&a.push("plot"+d.charAt(0).toUpperCase()+d.slice(1))});return a}function p(a){var c=[];(this.pointArrayMap||[]).forEach(function(d){c.push(a[d])});return c}function m(){var a=
this,d=a.pointArrayMap,b=[],e;b=a.getTranslatedLinesNames();g.prototype.translate.apply(a,arguments);a.points.forEach(function(c){d.forEach(function(d,x){e=c[d];a.dataModify&&(e=a.dataModify.modifyValue(e));null!==e&&(c[b[x]]=a.yAxis.toPixels(e,!0))})})}var e=[],a=["bottomLine"],d=["top","bottom"];b.compose=function(c){if(-1===e.indexOf(c)){e.push(c);var b=c.prototype;b.linesApiNames=b.linesApiNames||a.slice();b.pointArrayMap=b.pointArrayMap||d.slice();b.pointValKey=b.pointValKey||"top";b.drawGraph=
k;b.toYData=p;b.translate=m;b.getTranslatedLinesNames=h}return c}})(h||(h={}));return h});f(b,"Stock/Indicators/Klinger/KlingerIndicator.js",[b["Stock/Indicators/MultipleLinesComposition.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],function(b,k,g){var f=this&&this.__extends||function(){var b=function(e,a){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return b(e,a)};return function(e,
a){function d(){this.constructor=e}b(e,a);e.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)}}(),l=k.seriesTypes,n=l.sma,h=l.ema,p=g.correctFloat,t=g.error;l=g.extend;var v=g.isArray,w=g.merge;g=function(b){function e(){var a=null!==b&&b.apply(this,arguments)||this;a.data=void 0;a.points=void 0;a.options=void 0;a.volumeSeries=void 0;return a}f(e,b);e.prototype.calculateTrend=function(a,d){return a[d][1]+a[d][2]+a[d][3]>a[d-1][1]+a[d-1][2]+a[d-1][3]?1:-1};e.prototype.isValidData=
function(a){var d=this.chart,c=this.options,b=this.linkedParent;a=v(a)&&4===a.length;(d=this.volumeSeries||(this.volumeSeries=d.get(c.params.volumeSeriesID)))||t("Series "+c.params.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,b.chart);return!(![b,d].every(function(a){return a&&a.xData&&a.xData.length>=c.params.slowAvgPeriod})||!a)};e.prototype.getCM=function(a,b,c,e,g){return p(b+(c===e?a:g))};e.prototype.getDM=function(a,b){return p(a-b)};e.prototype.getVolumeForce=function(a){var b=[],
c=1;var e=0;var g=a[0][1]-a[0][2];var h=0;for(c;c<a.length;c++){var k=this.calculateTrend(a,c);var f=this.getDM(a[c][1],a[c][2]);e=this.getCM(e,f,k,h,g);h=this.volumeSeries.yData[c]*k*Math.abs(2*(f/e-1))*100;b.push([h]);h=k;g=f}return b};e.prototype.getEMA=function(a,b,c,e,g,k,f){return h.prototype.calculateEma(f||[],a,"undefined"===typeof k?1:k,e,b,"undefined"===typeof g?-1:g,c)};e.prototype.getSMA=function(a,b,c){return h.prototype.accumulatePeriodPoints(a,b,c)/a};e.prototype.getValues=function(a,
b){var c=[],d=a.xData;a=a.yData;var e=[],g=[],k=[],h,f=0,l=0,m=void 0,n=void 0,u=null;if(this.isValidData(a[0])){var r=this.getVolumeForce(a),t=this.getSMA(b.fastAvgPeriod,0,r),v=this.getSMA(b.slowAvgPeriod,0,r),w=2/(b.fastAvgPeriod+1),z=2/(b.slowAvgPeriod+1);for(f;f<a.length;f++)f>=b.fastAvgPeriod&&(m=l=this.getEMA(r,m,t,w,0,f,d)[1]),f>=b.slowAvgPeriod&&(n=h=this.getEMA(r,n,v,z,0,f,d)[1],h=p(l-h),k.push(h),k.length>=b.signalPeriod&&(u=k.slice(-b.signalPeriod).reduce(function(a,b){return a+b})/b.signalPeriod),
c.push([d[f],h,u]),e.push(d[f]),g.push([h,u]));return{values:c,xData:e,yData:g}}};e.defaultOptions=w(n.defaultOptions,{params:{fastAvgPeriod:34,slowAvgPeriod:55,signalPeriod:13,volumeSeriesID:"volume"},signalLine:{styles:{lineWidth:1,lineColor:"#ff0000"}},dataGrouping:{approximation:"averages"},tooltip:{pointFormat:'<span style="color: {point.color}">\u25cf</span><b> {series.name}</b><br/><span style="color: {point.color}">Klinger</span>: {point.y}<br/><span style="color: {point.series.options.signalLine.styles.lineColor}">Signal</span>: {point.signal}<br/>'}});
return e}(n);l(g.prototype,{linesApiNames:["signalLine"],nameBase:"Klinger",nameComponents:["fastAvgPeriod","slowAvgPeriod"],pointArrayMap:["y","signal"],parallelArrays:["x","y","signal"],pointValKey:"y"});b.compose(g);k.registerSeriesType("klinger",g);"";return g});f(b,"masters/indicators/klinger.src.js",[],function(){})});
//# sourceMappingURL=klinger.js.map