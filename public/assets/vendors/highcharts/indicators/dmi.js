/*
 Highstock JS v9.3.1 (2021-11-05)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Rafal Sebestjanski

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/indicators/dmi",["highcharts","highcharts/modules/stock"],function(f){a(f);a.Highcharts=f;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function f(a,h,g,f){a.hasOwnProperty(h)||(a[h]=f.apply(null,g))}a=a?a._modules:{};f(a,"Stock/Indicators/MultipleLinesComposition.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],
function(a,h){var g=a.seriesTypes.sma,f=h.defined,u=h.error,t=h.merge,v;(function(a){function h(){var b=this,c=b.linesApiNames,a=b.points,m=b.options,d=b.graph,h={options:{gapSize:m.gapSize}},e=[],p=b.getTranslatedLinesNames(b.pointValKey),n=a.length,l;p.forEach(function(b,c){for(e[c]=[];n--;)l=a[n],e[c].push({x:l.x,plotX:l.plotX,plotY:l[b],isNull:!f(l[b])});n=a.length});c.forEach(function(c,a){e[a]?(b.points=e[a],m[c]?b.options=t(m[c].styles,h):u('Error: "There is no '+c+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names." at mixin/multiple-line.js:34'),
b.graph=b["graph"+c],g.prototype.drawGraph.call(b),b["graph"+c]=b.graph):u('Error: "'+c+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")});b.points=a;b.options=m;b.graph=d;g.prototype.drawGraph.call(b)}function y(b){var c=[];(this.pointArrayMap||[]).forEach(function(a){a!==b&&c.push("plot"+a.charAt(0).toUpperCase()+a.slice(1))});return c}function d(b){var c=[];(this.pointArrayMap||[]).forEach(function(a){c.push(b[a])});return c}function b(){var b=
this,c=b.pointArrayMap,a=[],m;a=b.getTranslatedLinesNames();g.prototype.translate.apply(b,arguments);b.points.forEach(function(d){c.forEach(function(c,e){m=d[c];b.dataModify&&(m=b.dataModify.modifyValue(m));null!==m&&(d[a[e]]=b.yAxis.toPixels(m,!0))})})}var c=[],m=["bottomLine"],z=["top","bottom"];a.compose=function(a){if(-1===c.indexOf(a)){c.push(a);var k=a.prototype;k.linesApiNames=k.linesApiNames||m.slice();k.pointArrayMap=k.pointArrayMap||z.slice();k.pointValKey=k.pointValKey||"top";k.drawGraph=
h;k.toYData=d;k.translate=b;k.getTranslatedLinesNames=y}return a}})(v||(v={}));return v});f(a,"Stock/Indicators/DMI/DMIIndicator.js",[a["Stock/Indicators/MultipleLinesComposition.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,h,g){var f=this&&this.__extends||function(){var a=function(d,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])};return a(d,b)};return function(d,
b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),u=h.seriesTypes.sma,t=g.correctFloat,v=g.extend,w=g.isArray,x=g.merge;g=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.options=void 0;return b}f(d,a);d.prototype.calculateDM=function(b,a,m){var c=b[a][1],d=b[a][2],k=b[a-1][1];b=b[a-1][2];return t(c-k>b-d?m?Math.max(c-k,0):0:m?0:Math.max(b-d,0))};d.prototype.calculateDI=function(b,a){return b/a*100};d.prototype.calculateDX=
function(b,a){return t(Math.abs(b-a)/Math.abs(b+a)*100)};d.prototype.smoothValues=function(b,a,d){return t(b-b/d+a)};d.prototype.getTR=function(b,a){return t(Math.max(b[1]-b[2],a?Math.abs(b[1]-a[3]):0,a?Math.abs(b[2]-a[3]):0))};d.prototype.getValues=function(b,a){a=a.period;var c=b.xData,d=(b=b.yData)?b.length:0,g=[],k=[],h=[];if(!(c.length<=a)&&w(b[0])&&4===b[0].length){var f=0,q=0,r=0,e;for(e=1;e<d;e++)if(e<=a){var p=this.calculateDM(b,e,!0);var n=this.calculateDM(b,e);var l=this.getTR(b[e],b[e-
1]);f+=p;q+=n;r+=l;e===a&&(l=this.calculateDI(f,r),n=this.calculateDI(q,r),p=this.calculateDX(f,q),g.push([c[e],p,l,n]),k.push(c[e]),h.push([p,l,n]))}else p=this.calculateDM(b,e,!0),n=this.calculateDM(b,e),l=this.getTR(b[e],b[e-1]),f=this.smoothValues(f,p,a),q=this.smoothValues(q,n,a),r=this.smoothValues(r,l,a),l=this.calculateDI(f,r),n=this.calculateDI(q,r),p=this.calculateDX(f,q),g.push([c[e],p,l,n]),k.push(c[e]),h.push([p,l,n]);return{values:g,xData:k,yData:h}}};d.defaultOptions=x(u.defaultOptions,
{params:{index:void 0},marker:{enabled:!1},tooltip:{pointFormat:'<span style="color: {point.color}">\u25cf</span><b> {series.name}</b><br/><span style="color: {point.color}">DX</span>: {point.y}<br/><span style="color: {point.series.options.plusDILine.styles.lineColor}">+DI</span>: {point.plusDI}<br/><span style="color: {point.series.options.minusDILine.styles.lineColor}">-DI</span>: {point.minusDI}<br/>'},plusDILine:{styles:{lineWidth:1,lineColor:"#06b535"}},minusDILine:{styles:{lineWidth:1,lineColor:"#f21313"}},
dataGrouping:{approximation:"averages"}});return d}(u);v(g.prototype,{nameBase:"DMI",linesApiNames:["plusDILine","minusDILine"],pointArrayMap:["y","plusDI","minusDI"],parallelArrays:["x","y","plusDI","minusDI"],pointValKey:"y"});a.compose(g);h.registerSeriesType("dmi",g);"";return g});f(a,"masters/indicators/dmi.src.js",[],function(){})});
//# sourceMappingURL=dmi.js.map